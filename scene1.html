<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Final Project</title>
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>

    <!-- Import Vega -->

    <meta charset="utf-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-lite/2.0.0-beta.3/vega-lite.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.0-beta.31/vega.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-embed/3.0.0-beta.14/vega-embed.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/vega-tooltip/0.3.3/vega-tooltip.min.css"></link>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-tooltip/0.3.3/vega-tooltip.min.js"></script>

    <style>
    /*
      Color Palette:
      http://www.colourlovers.com/palette/1930/cheer_up_emo_kid
    */
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">CS 498 - Final Project</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
            <li class="active"><a href="scene1.html">Scene 1</a></li>
            <li><a href="scene2.html">Scene 2</a></li>
            <li><a href="scene3.html">Scene 3</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <div class="starter-template">
        <div class="col-md-6">
          <h1>Open Source Availability</h1>
          <p>In this first scene, you can see a list of fonts in the Typekit library sorted by their popularity and colored by their open source status.</p>
          <p>Hover over each bar in the chart to see a tooltip and find out which foundry a font belongs to, and what its monthly usage looks like.</p>
          <div>
            <a class="btn btn-success" href="index.html">&larr; Go Back</a>
            <a class="btn btn-success" href="scene2.html">Go Forward &rarr;</a>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div id="accordion" role="tablist" aria-multiselectable="true">
          <div class="card">
            <div class="card-header" role="tab" id="headingOne">
              <h3 class="mb-0">
                <button data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" class="btn btn-info" aria-controls="collapseOne">
                  About the Visualization, Scene 1
                </button>
              </h3>
            </div>

            <div id="collapseOne" class="collapse" role="tabpanel" aria-labelledby="headingOne">
              <div class="card-block">
                  <h4>How does this visualization follow a hybrid structure?</h4>

                  <p>This project follows the <b>interactive slideshow</b> narrative visualization structure. This means that during each slide, the user can drill down and list some details they might be interested in. Or they can choose to continue on if they’re not interested in the details of this slide.</p>

                  <p>During this first scene, the user can interact by hovering over various fonts in the visualization (the bar marks of the chart) and see more details about them if they are interested in maybe using them. They can also move from tab to tab in the visualization to filter on either Open Source fonts, Non-Open Source fonts, or see a list of All fonts colored by their open source status.</p>
                  <p>Otherwise, they can choose to continue on by clicking the "next" button or clicking a next scene in the navigation bar.</p>


                  <h4>How does this utilize scenes?</h4>

                  <p>Each scene follows a consistent layout and design, using Twitter bootstrap’s CSS library, and a standard color palette. This gives the user a sense of continuity and context between scenes. The navigation bar at the top of the page stays consistent between scenes, so the user can always navigate forward, back, or in-between while still understanding that they are within the same narrative context.</p>
                  <p>Each slide also contains a “next” and/or “back” button, which enable User Interface <b>events</b>. The user interacts by clicking on a button on navigation bar item.</p>

                  <h4>How does this utilize annotations?</h4>

                  <p>The annotation in this scene is represented by the <b>legend</b> at the top-right of the chart and a <b>tooltip</b> when a mouse is hovered over the bars in the chart.</p>

                  <h4>How does this utilize parameters?</h4>

                  <p>This scene is hyperlinked to the next scene. The name of the next scene is passed as an <b>input parameter</b> to the button and navigation bar items.</p>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="container">
      <hr>
      <div class="col-md-6">
        <table class="table table-bordered">
          <tr>
            <td>Availability</td>
            <td>Total # Fonts</td>
          </tr>
          <tr>
            <td>Open Source</td>
            <td>4,767</td>
          </tr>
          <tr>
            <td>Non-Open Source</td>
            <td>233</td>
          </tr>
        </table>
      </div>

      <div class="col-md-12">

        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" class="active"><a href="#all" aria-controls="all" role="tab" data-toggle="tab">All Fonts</a></li>
          <li role="presentation"><a href="#nos" aria-controls="nos" role="tab" data-toggle="tab">Non-Open Source</a></li>
          <li role="presentation"><a href="#os" aria-controls="os" role="tab" data-toggle="tab">Open Source</a></li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
          <div role="tabpanel" class="tab-pane" id="all">
            <div id="vis-all"></div>
          </div>
          <div role="tabpanel" class="tab-pane active" id="nos">
            <div id="vis-nos"></div>
          </div>
          <div role="tabpanel" class="tab-pane" id="os">
            <div id="vis-os"></div>
          </div>
        </div>

      </div>

    </div><!-- /.container -->
    <!-- Create Vega visualization -->
    <script>
    var vlSpecOs = {
      "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
      "data": {
        "url": "typekitfonts.csv"
      },
      "transform": [
        {
          "summarize": [{"aggregate": "sum", "field": "thirtydaypings", "as": "tdp" }],
          "filter": { "field": "opensource", "equal": "t" }
       }
      ],
      "mark": "bar",
      "width": 500,
      "encoding": {
        "y": {
          "field": "familyname",
          "type": "ordinal",
          "sort": { "op": "sum", "field": "thirtydaypings", "order":"descending"}
        },
        "x": {
          "aggregate": "sum",
          "field": "thirtydaypings",
          "type": "quantitative"
        },
        "color": {
          "field": "opensource", "type": "nominal",
          "scale": {"range": ["#C44D58", "#C44D58"]}
        }
      }
    };

    var vlSpecNos = {
      "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
      "data": {
        "url": "typekitfonts.csv"
      },
      "transform": [
        {
          "summarize": [{"aggregate": "sum", "field": "thirtydaypings", "as": "tdp" }],
          "filter": { "field": "opensource", "equal": "f" }
       }
      ],
      "mark": "bar",
      "width": 500,
      "encoding": {
        "y": {
          "field": "familyname",
          "type": "ordinal",
          "sort": { "op": "sum", "field": "thirtydaypings", "order":"descending"}
        },
        "x": {
          "aggregate": "sum",
          "field": "thirtydaypings",
          "type": "quantitative"
        },
        "color": {
          "field": "opensource", "type": "nominal",
          "scale": {"range": ["#4ECDC4", "#C44D58"]}
        }
      }
    };


    var vlSpecAll = {
      "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
      "data": {
        "url": "typekitfonts.csv"
      },
      "transform": [
        {
          "summarize": [{"aggregate": "sum", "field": "thirtydaypings", "as": "tdp" }],
          "filter": { "field": "opensource", "in": ["t", "f"] }
       }
      ],
      "mark": "bar",
      "width": 500,
      "encoding": {
        "y": {
          "field": "familyname",
          "type": "ordinal",
          "sort": { "op": "sum", "field": "thirtydaypings", "order":"descending"}
        },
        "x": {
          "aggregate": "sum",
          "field": "thirtydaypings",
          "type": "quantitative"
        },
        "color": {
          "field": "opensource", "type": "nominal",
          "scale": {"range": ["#4ECDC4", "#C44D58"]}
        }
      }
    };


    // Embed the visualization in the container with id `vis`
    var opt = {
      mode: "vega-lite",
      actions: false
    };
    vega.embed("#vis-os", vlSpecOs, opt, function (error, result) {
      vegaTooltip.vegaLite(result.view, vlSpecOs);
    });

    vega.embed("#vis-nos", vlSpecNos, opt, function (error, result) {
      vegaTooltip.vegaLite(result.view, vlSpecNos);
    });

    vega.embed("#vis-all", vlSpecAll, opt, function (error, result) {
      vegaTooltip.vegaLite(result.view, vlSpecAll);
    });
    </script>
  </body>
</html>
