<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Final Project</title>
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>

    <!-- Import Vega -->

    <meta charset="utf-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-lite/2.0.0-beta.3/vega-lite.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.0-beta.31/vega.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-embed/3.0.0-beta.14/vega-embed.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/vega-tooltip/0.3.3/vega-tooltip.min.css"></link>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-tooltip/0.3.3/vega-tooltip.min.js"></script>

    <script src="https://use.typekit.net/xzf0dfc.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>

    <style>
    /*
      Color Palette:
      http://www.colourlovers.com/palette/1930/cheer_up_emo_kid
    */
    h1 {
      font-size: 64px;
    }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">CS 498 - Final Project</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
            <li><a href="scene1.html">Scene 1</a></li>
            <li><a href="scene2.html">Scene 2</a></li>
            <li class="active"><a href="scene3.html">Scene 3</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->

    <div class="container">
      <div class="starter-template">
        <div class="col-md-6">
          <h1 class="tk-relation-two">Most Popular Foundries</h1>
          <p>In this final scene, you can see a visualization of foundries in the Typekit library highlighting all of the metrics we explored previously:</p>
          <p>
            <ul>
              <li>Foundries that provide open source fonts</li>
              <li>Foundries that do not provide open source fonts</li>
              <li>Foundries that provide English language fonts</li>
              <li>Foundries that provide non-English language fonts</li>
            </ul>
          </p>
          <p>Hover over each bar in the chart to see a tooltip and find out which font families are available from each foundry.</p>
        </div>
      </div>

      <div class="col-md-6">
        <div>
          <a class="btn btn-success" href="scene2.html">&larr; Go Back</a>
        </div>
        <div id="accordion" role="tablist" aria-multiselectable="true">
          <div class="card">
            <div class="card-header" role="tab" id="headingOne">
              <h3 class="mb-0">
                <button data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" class="btn btn-info" aria-controls="collapseOne">
                  About the Visualization, Scene 3
                </button>
              </h3>
            </div>

            <div id="collapseOne" class="collapse" role="tabpanel" aria-labelledby="headingOne">
              <div class="card-block">
                  <h4>How does this visualization follow a hybrid structure?</h4>

                  <p>This project follows the <b>interactive slideshow</b> narrative visualization structure. This means that during each slide, the user can drill down and list some details they might be interested in. Or they can choose to continue on if they’re not interested in the details of this slide.</p>

                  <p>During this third and final scene, the user is taken to a more high-level view of foundries specifically. They can interact by hovering over various foundries in the visualization (the bar marks of the chart) and see more details about them if they are interested in maybe using them.</p>
                  <p>If uninterested, they can leave this area of the slideshow by clicking the "back" button or by navigating through the top navigation bar.</p>


                  <h4>How does this utilize scenes?</h4>

                  <p>Each scene follows a consistent layout and design, using Twitter bootstrap’s CSS library, and a standard color palette. This gives the user a sense of continuity and context between scenes. The navigation bar at the top of the page stays consistent between scenes, so the user can always navigate forward, back, or in-between while still understanding that they are within the same narrative context.</p>
                  <p>Each slide also contains a “next” and/or “back” button, which enable User Interface <b>events</b>. The user interacts by clicking on a button on navigation bar item.</p>

                  <h4>How does this utilize annotations?</h4>

                  <p>The annotation in this scene is represented by the <b>legend</b> at the top-right of the chart and a <b>tooltip</b> when a mouse is hovered over the bars in the chart.</p>

                  <h4>How does this utilize parameters?</h4>

                  <p>This scene is hyperlinked to the next scene. The name of the next scene is passed as an <b>input parameter</b> to the button and navigation bar items.</p>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="container">
      <hr>
      <div class="col-md-6">
        <table class="table table-bordered">
          <tr>
            <td>Total # Foundries</td>
            <td>115</td>
          </tr>
          <tr>
            <td>Total # Font Families</td>
            <td>749</td>
          </tr>
          <tr>
            <td>Total # Font Variations</td>
            <td>5,000</td>
          </tr>
        </table>
      </div>

      <div class="col-md-12">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" class="active"><a href="#os" aria-controls="os" role="tab" data-toggle="tab">With Open Source Fonts</a></li>
          <li role="presentation"><a href="#nos" aria-controls="nos" role="tab" data-toggle="tab">Without Open Source Fonts</a></li>
          <li role="presentation"><a href="#english" aria-controls="english" role="tab" data-toggle="tab">With English Fonts</a></li>
          <li role="presentation"><a href="#non-english" aria-controls="non-english" role="tab" data-toggle="tab">With Non-English Fonts</a></li>
        </ul>

        <!-- Tab panes -->
        <div style="margin-top: 30px;" class="tab-content">
          <div role="tabpanel" class="tab-pane active" id="os">
            <h4 style="padding-left: 250px;">Foundries with Open Source Fonts</h4>
            <div  id="vis-os"></div>
          </div>
          <div role="tabpanel" class="tab-pane" id="nos">
            <h4 style="padding-left: 250px;">Foundries without Open Source Fonts</h4>
            <div  id="vis-nos"></div>
          </div>
          <div role="tabpanel" class="tab-pane" id="english">
            <h4 style="padding-left: 250px;">Foundries with English Fonts</h4>
            <div  id="vis-english"></div>
          </div>
          <div role="tabpanel" class="tab-pane" id="non-english">
            <h4 style="padding-left: 250px;">Foundries with Non-English Fonts</h4>
            <div  id="vis-non-english"></div>
          </div>
        </div>
      </div>

    </div><!-- /.container -->
    <!-- Create Vega visualization -->
    <script>
    var vlSpecOS = {
      "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
      "data": {
        "url": "finaldata.csv"
      },
      "transform": [
        {
          "summarize": [{"aggregate": "sum", "field": "thirtydaypings", "as": "tdp" }],
          "filter": { "field": "opensource", "in": ["t"] }
       }
      ],
      "mark": "bar",
      "width": 500,
      "encoding": {
        "y": {
          "field": "foundryname",
          "type": "ordinal",
          "sort": { "op": "sum", "field": "thirtydaypings", "order":"descending"},
          "axis": {"title": "Font Family"}
        },
        "x": {
          "aggregate": "sum",
          "field": "thirtydaypings",
          "type": "quantitative",
          "axis": {"title": "Monthly Usage (pings)"}
        },
        "color": {
          "field": "opensource", "type": "nominal",
          "scale": {"range": ["#4ECDC4", "#C44D58"]},
          "legend": {"title": "Open Source Status (true/false)"}
        }
      }
    };

    var vlSpecNOS = {
      "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
      "data": {
        "url": "finaldata.csv"
      },
      "transform": [
        {
          "summarize": [{"aggregate": "sum", "field": "thirtydaypings", "as": "tdp" }],
          "filter": { "field": "opensource", "in": ["f"] }
       }
      ],
      "mark": "bar",
      "width": 500,
      "encoding": {
        "y": {
          "field": "foundryname",
          "type": "ordinal",
          "sort": { "op": "sum", "field": "thirtydaypings", "order":"descending"},
          "axis": {"title": "Font Family"}
        },
        "x": {
          "aggregate": "sum",
          "field": "thirtydaypings",
          "type": "quantitative",
          "axis": {"title": "Monthly Usage (pings)"}
        },
        "color": {
          "field": "opensource", "type": "nominal",
          "scale": {"range": ["#C44D58", "#C44D58"]},
          "legend": {"title": "Open Source Status (true/false)"}
        }
      }
    };

    var vlSpecEnglish = {
      "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
      "data": {
        "url": "finaldata.csv"
      },
      "transform": [
        {
          "summarize": [{"aggregate": "sum", "field": "thirtydaypings", "as": "tdp" }],
          "filter": { "field": "defaultlanguages", "in": ["en"] }
       }
      ],
      "mark": "bar",
      "width": 500,
      "encoding": {
        "y": {
          "field": "foundryname",
          "type": "ordinal",
          "sort": { "op": "sum", "field": "thirtydaypings", "order":"descending"},
          "axis": {"title": "Font Family"}
        },
        "x": {
          "aggregate": "sum",
          "field": "thirtydaypings",
          "type": "quantitative",
          "axis": {"title": "Monthly Usage (pings)"}
        },
        "color": {
          "field": "defaultlanguages", "type": "nominal",
          "scale": {"range": ["#FF6B6B", "#FF6B6B"]},
          "legend": {"title": "Default Language"}
        }
      }
    };

    var vlSpecNonEnglish = {
      "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
      "data": {
        "url": "finaldata.csv"
      },
      "transform": [
        {
          "summarize": [{"aggregate": "sum", "field": "thirtydaypings", "as": "tdp" }],
          "filter": { "field": "defaultlanguages", "in": ["bn", "gu", "ja", "kn", "ko", "ta", "th", "zh-Hans", "zh-Hant"] }
       }
      ],
      "mark": "bar",
      "width": 500,
      "height": 100,
      "encoding": {
        "x": {
          "field": "foundryname",
          "type": "ordinal",
          "sort": { "op": "sum", "field": "thirtydaypings", "order":"descending"},
          "axis": {"title": "Font Family"}
        },
        "y": {
          "aggregate": "sum",
          "field": "thirtydaypings",
          "type": "quantitative",
          "axis": {"title": "Monthly Usage (pings)"}
        },
        "color": {
          "field": "defaultlanguages", "type": "nominal",
          "legend": {"title": "Default Language"}
        }
      }
    };

    var options = {
      showAllFields: false,
      fields: [
        {
          field: "familyname",
          title: "Font Family",
          formatType: "string"
        },
        {
          field: "foundryname",
          title: "Foundry",
          formatType: "string"
        },
        {
          field: "defaultlanguages",
          title: "Language",
          formatType: "string",
          aggregate: "median"
        },
        {
          field: "thirtydaypings",
          title: "Monthly Usage (pings)",
          formatType: "number",
          aggregate: "sum"
        },
        {
          field: "opensource",
          title: "Open Source",
          formatType: "string"
        },
      ],
      colorTheme: "light"
    };

    // Embed the visualization in the container with id `vis`
    var opt = {
      mode: "vega-lite",
      actions: false
    };
    vega.embed("#vis-os", vlSpecOS, opt, function (error, result) {
      vegaTooltip.vegaLite(result.view, vlSpecOS, options);
    });
    vega.embed("#vis-nos", vlSpecNOS, opt, function (error, result) {
      vegaTooltip.vegaLite(result.view, vlSpecNOS, options);
    });
    vega.embed("#vis-english", vlSpecEnglish, opt, function (error, result) {
      vegaTooltip.vegaLite(result.view, vlSpecEnglish, options);
    });
    vega.embed("#vis-non-english", vlSpecNonEnglish, opt, function (error, result) {
      vegaTooltip.vegaLite(result.view, vlSpecNonEnglish, options);
    });
    </script>
  </body>
</html>
